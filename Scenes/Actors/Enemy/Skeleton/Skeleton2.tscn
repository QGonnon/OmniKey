[gd_scene load_steps=100 format=2]

[ext_resource path="res://Scenes/Actors/Enemy/Enemy.tscn" type="PackedScene" id=1]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/MaleHero_GunC.png" type="Texture" id=2]
[ext_resource path="res://StateMachine/StateMachine.gd" type="Script" id=3]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/AttackState.gd" type="Script" id=4]
[ext_resource path="res://StateMachine/StateLabel.gd" type="Script" id=5]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/ChaseState.gd" type="Script" id=6]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/EnemyMoveState.gd" type="Script" id=7]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/WanderState.gd" type="Script" id=8]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/GoToState.gd" type="Script" id=9]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/WaitState.gd" type="Script" id=10]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/Squelette_SpriteSheet_Hurt.png" type="Texture" id=11]
[ext_resource path="res://StateMachine/State.gd" type="Script" id=12]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/SqueletteDeath&Block.png" type="Texture" id=13]
[ext_resource path="res://Scenes/Behaviours/DropperBehaviour.tscn" type="PackedScene" id=14]
[ext_resource path="res://Resources/ItemDropWeight/void_weight.tres" type="Resource" id=15]
[ext_resource path="res://Resources/ItemData/CoinWeight.tres" type="Resource" id=16]

[sub_resource type="Shader" id=46]
resource_local_to_scene = true
code = "shader_type canvas_item;

uniform vec4 flash_color : hint_color = vec4(1.0);
uniform float opacity : hint_range(0.0, 1.0) = 0.0;

void fragment(){
	vec4 current_color = texture(TEXTURE, UV);
	if (current_color.a == 0.0){
		discard;
	}
	
	COLOR = mix(current_color, flash_color, opacity);
}"

[sub_resource type="ShaderMaterial" id=47]
resource_local_to_scene = true
shader = SubResource( 46 )
shader_param/flash_color = Color( 1, 1, 1, 1 )
shader_param/opacity = 0.0

[sub_resource type="AtlasTexture" id=117]
atlas = ExtResource( 2 )
region = Rect2( 384, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=118]
atlas = ExtResource( 2 )
region = Rect2( 512, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=119]
atlas = ExtResource( 2 )
region = Rect2( 640, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=120]
atlas = ExtResource( 2 )
region = Rect2( 768, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=121]
atlas = ExtResource( 2 )
region = Rect2( 896, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=122]
atlas = ExtResource( 2 )
region = Rect2( 1024, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=123]
atlas = ExtResource( 2 )
region = Rect2( 1152, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=124]
atlas = ExtResource( 2 )
region = Rect2( 1280, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=125]
atlas = ExtResource( 2 )
region = Rect2( 1408, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=126]
atlas = ExtResource( 2 )
region = Rect2( 384, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=127]
atlas = ExtResource( 2 )
region = Rect2( 512, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=128]
atlas = ExtResource( 2 )
region = Rect2( 640, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=129]
atlas = ExtResource( 2 )
region = Rect2( 768, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=130]
atlas = ExtResource( 2 )
region = Rect2( 896, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=131]
atlas = ExtResource( 2 )
region = Rect2( 1024, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=132]
atlas = ExtResource( 2 )
region = Rect2( 1152, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=133]
atlas = ExtResource( 2 )
region = Rect2( 1280, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=134]
atlas = ExtResource( 2 )
region = Rect2( 1408, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=135]
atlas = ExtResource( 2 )
region = Rect2( 384, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=136]
atlas = ExtResource( 2 )
region = Rect2( 512, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=137]
atlas = ExtResource( 2 )
region = Rect2( 640, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=138]
atlas = ExtResource( 2 )
region = Rect2( 768, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=139]
atlas = ExtResource( 2 )
region = Rect2( 896, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=140]
atlas = ExtResource( 2 )
region = Rect2( 1024, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=141]
atlas = ExtResource( 2 )
region = Rect2( 1152, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=142]
atlas = ExtResource( 2 )
region = Rect2( 1280, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=143]
atlas = ExtResource( 2 )
region = Rect2( 1408, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=144]
atlas = ExtResource( 2 )
region = Rect2( 384, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=145]
atlas = ExtResource( 2 )
region = Rect2( 512, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=146]
atlas = ExtResource( 2 )
region = Rect2( 640, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=147]
atlas = ExtResource( 2 )
region = Rect2( 768, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=148]
atlas = ExtResource( 2 )
region = Rect2( 896, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=149]
atlas = ExtResource( 2 )
region = Rect2( 1024, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=150]
atlas = ExtResource( 2 )
region = Rect2( 1152, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=151]
atlas = ExtResource( 2 )
region = Rect2( 1280, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=152]
atlas = ExtResource( 2 )
region = Rect2( 1408, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=60]
atlas = ExtResource( 13 )
region = Rect2( 0, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=61]
atlas = ExtResource( 13 )
region = Rect2( 80, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=62]
atlas = ExtResource( 13 )
region = Rect2( 160, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=63]
atlas = ExtResource( 13 )
region = Rect2( 240, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=48]
atlas = ExtResource( 13 )
region = Rect2( 0, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=49]
atlas = ExtResource( 13 )
region = Rect2( 80, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=50]
atlas = ExtResource( 13 )
region = Rect2( 160, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=51]
atlas = ExtResource( 13 )
region = Rect2( 240, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=56]
atlas = ExtResource( 13 )
region = Rect2( 0, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=57]
atlas = ExtResource( 13 )
region = Rect2( 80, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=58]
atlas = ExtResource( 13 )
region = Rect2( 160, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=59]
atlas = ExtResource( 13 )
region = Rect2( 240, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=52]
atlas = ExtResource( 13 )
region = Rect2( 0, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=53]
atlas = ExtResource( 13 )
region = Rect2( 80, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=54]
atlas = ExtResource( 13 )
region = Rect2( 160, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=55]
atlas = ExtResource( 13 )
region = Rect2( 240, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=40]
atlas = ExtResource( 11 )
region = Rect2( 0, 0, 64, 64 )

[sub_resource type="AtlasTexture" id=41]
atlas = ExtResource( 11 )
region = Rect2( 64, 0, 64, 64 )

[sub_resource type="AtlasTexture" id=42]
atlas = ExtResource( 11 )
region = Rect2( 0, 128, 64, 64 )

[sub_resource type="AtlasTexture" id=43]
atlas = ExtResource( 11 )
region = Rect2( 64, 128, 64, 64 )

[sub_resource type="AtlasTexture" id=44]
atlas = ExtResource( 11 )
region = Rect2( 0, 192, 64, 64 )

[sub_resource type="AtlasTexture" id=45]
atlas = ExtResource( 11 )
region = Rect2( 64, 192, 64, 64 )

[sub_resource type="AtlasTexture" id=38]
atlas = ExtResource( 11 )
region = Rect2( 0, 64, 64, 64 )

[sub_resource type="AtlasTexture" id=39]
atlas = ExtResource( 11 )
region = Rect2( 64, 64, 64, 64 )

[sub_resource type="AtlasTexture" id=153]
atlas = ExtResource( 2 )
region = Rect2( 128, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=154]
atlas = ExtResource( 2 )
region = Rect2( 128, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=155]
atlas = ExtResource( 2 )
region = Rect2( 128, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=156]
atlas = ExtResource( 2 )
region = Rect2( 128, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=157]
atlas = ExtResource( 2 )
region = Rect2( 0, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=158]
atlas = ExtResource( 2 )
region = Rect2( 128, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=159]
atlas = ExtResource( 2 )
region = Rect2( 256, 0, 128, 64 )

[sub_resource type="AtlasTexture" id=160]
atlas = ExtResource( 2 )
region = Rect2( 0, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=161]
atlas = ExtResource( 2 )
region = Rect2( 128, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=162]
atlas = ExtResource( 2 )
region = Rect2( 256, 64, 128, 64 )

[sub_resource type="AtlasTexture" id=163]
atlas = ExtResource( 2 )
region = Rect2( 0, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=164]
atlas = ExtResource( 2 )
region = Rect2( 128, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=165]
atlas = ExtResource( 2 )
region = Rect2( 256, 128, 128, 64 )

[sub_resource type="AtlasTexture" id=166]
atlas = ExtResource( 2 )
region = Rect2( 0, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=167]
atlas = ExtResource( 2 )
region = Rect2( 128, 192, 128, 64 )

[sub_resource type="AtlasTexture" id=168]
atlas = ExtResource( 2 )
region = Rect2( 256, 192, 128, 64 )

[sub_resource type="SpriteFrames" id=33]
animations = [ {
"frames": [ SubResource( 117 ), SubResource( 118 ), SubResource( 119 ), SubResource( 120 ), SubResource( 121 ), SubResource( 122 ), SubResource( 123 ), SubResource( 124 ), SubResource( 125 ) ],
"loop": false,
"name": "AttackDown",
"speed": 60.0
}, {
"frames": [ SubResource( 126 ), SubResource( 127 ), SubResource( 128 ), SubResource( 129 ), SubResource( 130 ), SubResource( 131 ), SubResource( 132 ), SubResource( 133 ), SubResource( 134 ) ],
"loop": false,
"name": "AttackLeft",
"speed": 60.0
}, {
"frames": [ SubResource( 135 ), SubResource( 136 ), SubResource( 137 ), SubResource( 138 ), SubResource( 139 ), SubResource( 140 ), SubResource( 141 ), SubResource( 142 ), SubResource( 143 ) ],
"loop": false,
"name": "AttackRight",
"speed": 60.0
}, {
"frames": [ SubResource( 144 ), SubResource( 145 ), SubResource( 146 ), SubResource( 147 ), SubResource( 148 ), SubResource( 149 ), SubResource( 150 ), SubResource( 151 ), SubResource( 152 ) ],
"loop": false,
"name": "AttackUp",
"speed": 60.0
}, {
"frames": [ SubResource( 60 ), SubResource( 61 ), SubResource( 62 ), SubResource( 63 ) ],
"loop": false,
"name": "DeadDown",
"speed": 10.0
}, {
"frames": [ SubResource( 48 ), SubResource( 49 ), SubResource( 50 ), SubResource( 51 ) ],
"loop": false,
"name": "DeadLeft",
"speed": 10.0
}, {
"frames": [ SubResource( 56 ), SubResource( 57 ), SubResource( 58 ), SubResource( 59 ) ],
"loop": false,
"name": "DeadRight",
"speed": 10.0
}, {
"frames": [ SubResource( 52 ), SubResource( 53 ), SubResource( 54 ), SubResource( 55 ) ],
"loop": false,
"name": "DeadUp",
"speed": 10.0
}, {
"frames": [ SubResource( 40 ), SubResource( 41 ) ],
"loop": false,
"name": "HurtDown",
"speed": 10.0
}, {
"frames": [ SubResource( 42 ), SubResource( 43 ) ],
"loop": false,
"name": "HurtLeft",
"speed": 10.0
}, {
"frames": [ SubResource( 44 ), SubResource( 45 ) ],
"loop": true,
"name": "HurtRight",
"speed": 10.0
}, {
"frames": [ SubResource( 38 ), SubResource( 39 ) ],
"loop": false,
"name": "HurtUp",
"speed": 10.0
}, {
"frames": [ SubResource( 153 ) ],
"loop": true,
"name": "IdleDown",
"speed": 5.0
}, {
"frames": [ SubResource( 154 ) ],
"loop": true,
"name": "IdleLeft",
"speed": 5.0
}, {
"frames": [ SubResource( 155 ) ],
"loop": true,
"name": "IdleRight",
"speed": 5.0
}, {
"frames": [ SubResource( 156 ) ],
"loop": true,
"name": "IdleUp",
"speed": 5.0
}, {
"frames": [ SubResource( 157 ), SubResource( 158 ), SubResource( 159 ) ],
"loop": true,
"name": "MoveDown",
"speed": 10.0
}, {
"frames": [ SubResource( 160 ), SubResource( 161 ), SubResource( 162 ) ],
"loop": true,
"name": "MoveLeft",
"speed": 10.0
}, {
"frames": [ SubResource( 163 ), SubResource( 164 ), SubResource( 165 ) ],
"loop": true,
"name": "MoveRight",
"speed": 10.0
}, {
"frames": [ SubResource( 166 ), SubResource( 167 ), SubResource( 168 ) ],
"loop": true,
"name": "MoveUp",
"speed": 10.0
} ]

[sub_resource type="CapsuleShape2D" id=116]

[sub_resource type="RectangleShape2D" id=35]
extents = Vector2( 20, 10 )

[sub_resource type="CircleShape2D" id=36]
radius = 162.16

[sub_resource type="CircleShape2D" id=37]
radius = 28.3384

[node name="Skeleton" instance=ExtResource( 1 )]
collision_mask = 2
speed = 170.0

[node name="AnimatedSprite" parent="." index="0"]
material = SubResource( 47 )
scale = Vector2( 0.75, 0.75 )
frames = SubResource( 33 )
animation = "IdleDown"

[node name="CollisionShape2D" parent="." index="1"]
position = Vector2( -1.33333, 2.66667 )
shape = SubResource( 116 )

[node name="CollisionShape2D" parent="AttackHitBox" index="0"]
shape = SubResource( 35 )

[node name="Move" parent="StateMachine" index="1"]
script = ExtResource( 7 )

[node name="StateLabel" type="Label" parent="StateMachine" index="3"]
margin_left = -20.1815
margin_top = -40.7835
margin_right = 19.8185
margin_bottom = -26.7835
script = ExtResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BehaviourTree" type="Node2D" parent="." index="4"]
script = ExtResource( 3 )

[node name="Wander" type="Node" parent="BehaviourTree" index="0"]
script = ExtResource( 8 )

[node name="Wait" type="Node" parent="BehaviourTree/Wander" index="0"]
script = ExtResource( 10 )

[node name="Timer" type="Timer" parent="BehaviourTree/Wander/Wait" index="0"]
one_shot = true

[node name="GoTo" type="Node" parent="BehaviourTree/Wander" index="1"]
script = ExtResource( 9 )

[node name="Chase" type="Node" parent="BehaviourTree" index="1"]
script = ExtResource( 6 )

[node name="Attack" type="Node" parent="BehaviourTree" index="2"]
script = ExtResource( 4 )

[node name="Cooldown" type="Timer" parent="BehaviourTree/Attack" index="0"]
one_shot = true

[node name="Inactive" type="Node" parent="BehaviourTree" index="3"]
script = ExtResource( 12 )

[node name="StateLabel" type="Label" parent="BehaviourTree" index="4"]
margin_left = -19.3406
margin_top = -55.9196
margin_right = 20.6594
margin_bottom = -41.9196
script = ExtResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ChaseArea" parent="." index="5"]
visible = false

[node name="CollisionShape2D" parent="ChaseArea" index="0"]
shape = SubResource( 36 )

[node name="AttackArea" parent="." index="6"]
visible = false

[node name="CollisionShape2D" parent="AttackArea" index="0"]
shape = SubResource( 37 )

[node name="PathLine" parent="." index="7"]
visible = true

[node name="DropperBehaviour" parent="." index="12" instance=ExtResource( 14 )]
item_drop_weight_array = [ ExtResource( 15 ), ExtResource( 16 ) ]

[connection signal="state_changed" from="StateMachine" to="." method="_on_StateMachine_state_changed"]
