[gd_scene load_steps=100 format=2]

[ext_resource path="res://Scenes/Actors/Enemy/Enemy.tscn" type="PackedScene" id=1]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/MaleHero_GunD.png" type="Texture" id=2]
[ext_resource path="res://StateMachine/StateMachine.gd" type="Script" id=3]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/AttackState.gd" type="Script" id=4]
[ext_resource path="res://StateMachine/StateLabel.gd" type="Script" id=5]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/ChaseState.gd" type="Script" id=6]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/EnemyMoveState.gd" type="Script" id=7]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/WanderState.gd" type="Script" id=8]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/GoToState.gd" type="Script" id=9]
[ext_resource path="res://Scenes/Actors/Enemy/BehaviourStates/WaitState.gd" type="Script" id=10]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/Squelette_SpriteSheet_Hurt.png" type="Texture" id=11]
[ext_resource path="res://StateMachine/State.gd" type="Script" id=12]
[ext_resource path="res://Scenes/Actors/Enemy/Skeleton/SqueletteDeath&Block.png" type="Texture" id=13]
[ext_resource path="res://Scenes/Behaviours/DropperBehaviour.tscn" type="PackedScene" id=14]
[ext_resource path="res://Resources/ItemDropWeight/void_weight.tres" type="Resource" id=15]
[ext_resource path="res://Resources/ItemData/CoinWeight.tres" type="Resource" id=16]

[sub_resource type="Shader" id=46]
resource_local_to_scene = true
code = "shader_type canvas_item;

uniform vec4 flash_color : hint_color = vec4(1.0);
uniform float opacity : hint_range(0.0, 1.0) = 0.0;

void fragment(){
	vec4 current_color = texture(TEXTURE, UV);
	if (current_color.a == 0.0){
		discard;
	}
	
	COLOR = mix(current_color, flash_color, opacity);
}"

[sub_resource type="ShaderMaterial" id=47]
resource_local_to_scene = true
shader = SubResource( 46 )
shader_param/flash_color = Color( 1, 1, 1, 1 )
shader_param/opacity = 0.0

[sub_resource type="AtlasTexture" id=64]
atlas = ExtResource( 2 )
region = Rect2( 96, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=65]
atlas = ExtResource( 2 )
region = Rect2( 128, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=66]
atlas = ExtResource( 2 )
region = Rect2( 160, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=67]
atlas = ExtResource( 2 )
region = Rect2( 192, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=68]
atlas = ExtResource( 2 )
region = Rect2( 224, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=69]
atlas = ExtResource( 2 )
region = Rect2( 256, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=70]
atlas = ExtResource( 2 )
region = Rect2( 288, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=71]
atlas = ExtResource( 2 )
region = Rect2( 320, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=72]
atlas = ExtResource( 2 )
region = Rect2( 352, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=73]
atlas = ExtResource( 2 )
region = Rect2( 96, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=74]
atlas = ExtResource( 2 )
region = Rect2( 128, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=75]
atlas = ExtResource( 2 )
region = Rect2( 160, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=76]
atlas = ExtResource( 2 )
region = Rect2( 192, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=77]
atlas = ExtResource( 2 )
region = Rect2( 224, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=78]
atlas = ExtResource( 2 )
region = Rect2( 256, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=79]
atlas = ExtResource( 2 )
region = Rect2( 288, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=80]
atlas = ExtResource( 2 )
region = Rect2( 320, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=81]
atlas = ExtResource( 2 )
region = Rect2( 352, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=82]
atlas = ExtResource( 2 )
region = Rect2( 96, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=83]
atlas = ExtResource( 2 )
region = Rect2( 128, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=84]
atlas = ExtResource( 2 )
region = Rect2( 160, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=85]
atlas = ExtResource( 2 )
region = Rect2( 192, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=86]
atlas = ExtResource( 2 )
region = Rect2( 224, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=87]
atlas = ExtResource( 2 )
region = Rect2( 256, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=88]
atlas = ExtResource( 2 )
region = Rect2( 288, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=89]
atlas = ExtResource( 2 )
region = Rect2( 320, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=90]
atlas = ExtResource( 2 )
region = Rect2( 352, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=91]
atlas = ExtResource( 2 )
region = Rect2( 96, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=92]
atlas = ExtResource( 2 )
region = Rect2( 128, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=93]
atlas = ExtResource( 2 )
region = Rect2( 160, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=94]
atlas = ExtResource( 2 )
region = Rect2( 192, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=95]
atlas = ExtResource( 2 )
region = Rect2( 224, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=96]
atlas = ExtResource( 2 )
region = Rect2( 256, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=97]
atlas = ExtResource( 2 )
region = Rect2( 288, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=98]
atlas = ExtResource( 2 )
region = Rect2( 320, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=99]
atlas = ExtResource( 2 )
region = Rect2( 352, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=60]
atlas = ExtResource( 13 )
region = Rect2( 0, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=61]
atlas = ExtResource( 13 )
region = Rect2( 80, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=62]
atlas = ExtResource( 13 )
region = Rect2( 160, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=63]
atlas = ExtResource( 13 )
region = Rect2( 240, 0, 80, 64 )

[sub_resource type="AtlasTexture" id=48]
atlas = ExtResource( 13 )
region = Rect2( 0, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=49]
atlas = ExtResource( 13 )
region = Rect2( 80, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=50]
atlas = ExtResource( 13 )
region = Rect2( 160, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=51]
atlas = ExtResource( 13 )
region = Rect2( 240, 128, 80, 64 )

[sub_resource type="AtlasTexture" id=56]
atlas = ExtResource( 13 )
region = Rect2( 0, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=57]
atlas = ExtResource( 13 )
region = Rect2( 80, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=58]
atlas = ExtResource( 13 )
region = Rect2( 160, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=59]
atlas = ExtResource( 13 )
region = Rect2( 240, 192, 80, 64 )

[sub_resource type="AtlasTexture" id=52]
atlas = ExtResource( 13 )
region = Rect2( 0, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=53]
atlas = ExtResource( 13 )
region = Rect2( 80, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=54]
atlas = ExtResource( 13 )
region = Rect2( 160, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=55]
atlas = ExtResource( 13 )
region = Rect2( 240, 64, 80, 64 )

[sub_resource type="AtlasTexture" id=40]
atlas = ExtResource( 11 )
region = Rect2( 0, 0, 64, 64 )

[sub_resource type="AtlasTexture" id=41]
atlas = ExtResource( 11 )
region = Rect2( 64, 0, 64, 64 )

[sub_resource type="AtlasTexture" id=42]
atlas = ExtResource( 11 )
region = Rect2( 0, 128, 64, 64 )

[sub_resource type="AtlasTexture" id=43]
atlas = ExtResource( 11 )
region = Rect2( 64, 128, 64, 64 )

[sub_resource type="AtlasTexture" id=44]
atlas = ExtResource( 11 )
region = Rect2( 0, 192, 64, 64 )

[sub_resource type="AtlasTexture" id=45]
atlas = ExtResource( 11 )
region = Rect2( 64, 192, 64, 64 )

[sub_resource type="AtlasTexture" id=38]
atlas = ExtResource( 11 )
region = Rect2( 0, 64, 64, 64 )

[sub_resource type="AtlasTexture" id=39]
atlas = ExtResource( 11 )
region = Rect2( 64, 64, 64, 64 )

[sub_resource type="AtlasTexture" id=100]
atlas = ExtResource( 2 )
region = Rect2( 32, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=101]
atlas = ExtResource( 2 )
region = Rect2( 32, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=102]
atlas = ExtResource( 2 )
region = Rect2( 32, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=103]
atlas = ExtResource( 2 )
region = Rect2( 32, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=104]
atlas = ExtResource( 2 )
region = Rect2( 0, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=105]
atlas = ExtResource( 2 )
region = Rect2( 32, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=106]
atlas = ExtResource( 2 )
region = Rect2( 64, 128, 32, 32 )

[sub_resource type="AtlasTexture" id=107]
atlas = ExtResource( 2 )
region = Rect2( 0, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=108]
atlas = ExtResource( 2 )
region = Rect2( 32, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=109]
atlas = ExtResource( 2 )
region = Rect2( 64, 160, 32, 32 )

[sub_resource type="AtlasTexture" id=110]
atlas = ExtResource( 2 )
region = Rect2( 0, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=111]
atlas = ExtResource( 2 )
region = Rect2( 32, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=112]
atlas = ExtResource( 2 )
region = Rect2( 64, 192, 32, 32 )

[sub_resource type="AtlasTexture" id=113]
atlas = ExtResource( 2 )
region = Rect2( 0, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=114]
atlas = ExtResource( 2 )
region = Rect2( 32, 224, 32, 32 )

[sub_resource type="AtlasTexture" id=115]
atlas = ExtResource( 2 )
region = Rect2( 64, 224, 32, 32 )

[sub_resource type="SpriteFrames" id=33]
animations = [ {
"frames": [ SubResource( 64 ), SubResource( 65 ), SubResource( 66 ), SubResource( 67 ), SubResource( 68 ), SubResource( 69 ), SubResource( 70 ), SubResource( 71 ), SubResource( 72 ) ],
"loop": false,
"name": "AttackDown",
"speed": 60.0
}, {
"frames": [ SubResource( 73 ), SubResource( 74 ), SubResource( 75 ), SubResource( 76 ), SubResource( 77 ), SubResource( 78 ), SubResource( 79 ), SubResource( 80 ), SubResource( 81 ) ],
"loop": false,
"name": "AttackLeft",
"speed": 60.0
}, {
"frames": [ SubResource( 82 ), SubResource( 83 ), SubResource( 84 ), SubResource( 85 ), SubResource( 86 ), SubResource( 87 ), SubResource( 88 ), SubResource( 89 ), SubResource( 90 ) ],
"loop": false,
"name": "AttackRight",
"speed": 60.0
}, {
"frames": [ SubResource( 91 ), SubResource( 92 ), SubResource( 93 ), SubResource( 94 ), SubResource( 95 ), SubResource( 96 ), SubResource( 97 ), SubResource( 98 ), SubResource( 99 ) ],
"loop": false,
"name": "AttackUp",
"speed": 60.0
}, {
"frames": [ SubResource( 60 ), SubResource( 61 ), SubResource( 62 ), SubResource( 63 ) ],
"loop": false,
"name": "DeadDown",
"speed": 10.0
}, {
"frames": [ SubResource( 48 ), SubResource( 49 ), SubResource( 50 ), SubResource( 51 ) ],
"loop": false,
"name": "DeadLeft",
"speed": 10.0
}, {
"frames": [ SubResource( 56 ), SubResource( 57 ), SubResource( 58 ), SubResource( 59 ) ],
"loop": false,
"name": "DeadRight",
"speed": 10.0
}, {
"frames": [ SubResource( 52 ), SubResource( 53 ), SubResource( 54 ), SubResource( 55 ) ],
"loop": false,
"name": "DeadUp",
"speed": 10.0
}, {
"frames": [ SubResource( 40 ), SubResource( 41 ) ],
"loop": false,
"name": "HurtDown",
"speed": 10.0
}, {
"frames": [ SubResource( 42 ), SubResource( 43 ) ],
"loop": false,
"name": "HurtLeft",
"speed": 10.0
}, {
"frames": [ SubResource( 44 ), SubResource( 45 ) ],
"loop": true,
"name": "HurtRight",
"speed": 10.0
}, {
"frames": [ SubResource( 38 ), SubResource( 39 ) ],
"loop": false,
"name": "HurtUp",
"speed": 10.0
}, {
"frames": [ SubResource( 100 ) ],
"loop": true,
"name": "IdleDown",
"speed": 5.0
}, {
"frames": [ SubResource( 101 ) ],
"loop": true,
"name": "IdleLeft",
"speed": 5.0
}, {
"frames": [ SubResource( 102 ) ],
"loop": true,
"name": "IdleRight",
"speed": 5.0
}, {
"frames": [ SubResource( 103 ) ],
"loop": true,
"name": "IdleUp",
"speed": 5.0
}, {
"frames": [ SubResource( 104 ), SubResource( 105 ), SubResource( 106 ) ],
"loop": true,
"name": "MoveDown",
"speed": 10.0
}, {
"frames": [ SubResource( 107 ), SubResource( 108 ), SubResource( 109 ) ],
"loop": true,
"name": "MoveLeft",
"speed": 10.0
}, {
"frames": [ SubResource( 110 ), SubResource( 111 ), SubResource( 112 ) ],
"loop": true,
"name": "MoveRight",
"speed": 10.0
}, {
"frames": [ SubResource( 113 ), SubResource( 114 ), SubResource( 115 ) ],
"loop": true,
"name": "MoveUp",
"speed": 10.0
} ]

[sub_resource type="CapsuleShape2D" id=116]

[sub_resource type="RectangleShape2D" id=35]
extents = Vector2( 20, 10 )

[sub_resource type="CircleShape2D" id=36]
radius = 162.16

[sub_resource type="CircleShape2D" id=37]
radius = 28.3384

[node name="Skeleton" instance=ExtResource( 1 )]
collision_mask = 2
speed = 170.0

[node name="AnimatedSprite" parent="." index="0"]
material = SubResource( 47 )
scale = Vector2( 1.5, 1.5 )
frames = SubResource( 33 )
animation = "IdleDown"

[node name="CollisionShape2D" parent="." index="1"]
position = Vector2( -1.33333, 2.66667 )
shape = SubResource( 116 )

[node name="CollisionShape2D" parent="AttackHitBox" index="0"]
shape = SubResource( 35 )

[node name="Move" parent="StateMachine" index="1"]
script = ExtResource( 7 )

[node name="StateLabel" type="Label" parent="StateMachine" index="3"]
margin_left = -20.1815
margin_top = -40.7835
margin_right = 19.8185
margin_bottom = -26.7835
script = ExtResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BehaviourTree" type="Node2D" parent="." index="4"]
visible = false
script = ExtResource( 3 )

[node name="Wander" type="Node" parent="BehaviourTree" index="0"]
script = ExtResource( 8 )

[node name="Wait" type="Node" parent="BehaviourTree/Wander" index="0"]
script = ExtResource( 10 )

[node name="Timer" type="Timer" parent="BehaviourTree/Wander/Wait" index="0"]
one_shot = true

[node name="GoTo" type="Node" parent="BehaviourTree/Wander" index="1"]
script = ExtResource( 9 )

[node name="Chase" type="Node" parent="BehaviourTree" index="1"]
script = ExtResource( 6 )

[node name="Attack" type="Node" parent="BehaviourTree" index="2"]
script = ExtResource( 4 )

[node name="Cooldown" type="Timer" parent="BehaviourTree/Attack" index="0"]
one_shot = true

[node name="Inactive" type="Node" parent="BehaviourTree" index="3"]
script = ExtResource( 12 )

[node name="StateLabel" type="Label" parent="BehaviourTree" index="4"]
margin_left = -19.3406
margin_top = -55.9196
margin_right = 20.6594
margin_bottom = -41.9196
script = ExtResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ChaseArea" parent="." index="5"]
visible = false

[node name="CollisionShape2D" parent="ChaseArea" index="0"]
shape = SubResource( 36 )

[node name="AttackArea" parent="." index="6"]
visible = false

[node name="CollisionShape2D" parent="AttackArea" index="0"]
shape = SubResource( 37 )

[node name="PathLine" parent="." index="7"]
visible = true

[node name="DropperBehaviour" parent="." index="12" instance=ExtResource( 14 )]
item_drop_weight_array = [ ExtResource( 15 ), ExtResource( 16 ) ]

[connection signal="state_changed" from="StateMachine" to="." method="_on_StateMachine_state_changed"]
